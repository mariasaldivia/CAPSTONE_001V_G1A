/* ===================================================================
   PALETA (solo para este contenido .cd)
   =================================================================== */
:root {
  --content-bg: #eff6ff;            /* Fondo principal claro */
  --content-panel: #ffffff;         /* Fondo de tarjeta/panel */
  --content-text: #1e3a8a;          /* Texto principal oscuro */
  --content-text-muted: #1e40af;    /* Texto secundario */
  --content-border: #dbeafe;        /* Bordes suaves */
  --content-hover: rgba(30,64,175,.05);
  --content-accent: #f97316;        /* Acento principal (naranja) */
  --content-accent-bg: rgba(249,115,22,.08);
  --content-accent-bg-light: rgba(249,115,22,.12);
}

/* ===================================================================
   CONTENEDOR
   - Cambio clave: ocupar todo el ancho disponible
   =================================================================== */
.cd{
  /* antes: max-width: 1200px; margin: 0 auto; padding: 1rem; */
  max-width: 100%;
  width: 100%;
  margin: 0;
  padding: 1.25rem 1rem;
}

/* ===================================================================
   HEADER
   =================================================================== */
.cd__header{ margin: .25rem 0 1rem; }
.cd__headerRow{ display: flex; align-items: center; justify-content: space-between; gap: .75rem; }
.cd__title{ margin: 0; font-size: 1.25rem; color: var(--content-text); }
.cd__actionsTop{ display: flex; gap: .5rem; flex-wrap: wrap; }
/* antes max-width: 900px; -> acompañamos el nuevo ancho */
.cd__desc{ margin: .5rem 0 0; max-width: 100%; color: var(--content-text-muted); line-height: 1.5; }

/* ===================================================================
   BOTONES
   =================================================================== */
.cd__btn{ border: 0; border-radius: .6rem; padding: .55rem .9rem; cursor: pointer; font-weight: 600; transition: background .2s ease, transform .1s ease; }
.cd__btn:hover{ transform: translateY(-1px); }
.cd__btn--ghost{ background: var(--content-hover); color: var(--content-text-muted); }
.cd__btn--ok{ background: #22c55e; color: #062235; }
.cd__btn--danger{ background: #ef4444; color: #fff; }
.cd__btn--warn{ background: var(--content-accent); color: #fff; }
.cd__link{ color: var(--content-accent); text-decoration: underline; }

/* ===================================================================
   TARJETAS
   =================================================================== */
.cd__card{
  background: var(--content-panel);
  color: var(--content-text);
  border: 1px solid var(--content-border);
  border-radius: 14px;
  padding: 1rem;
}

/* ===================================================================
   GRID PRINCIPAL
   - Cambio clave: más espacio para el panel de detalle (visor grande)
   =================================================================== */
.cd__gridMain{ display: grid; gap: 1rem; grid-template-columns: 1fr; }
/* antes: 1.4fr / 1fr */
.cd__gridMain.has-detail{ grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr); }

/* ===================================================================
   LISTA
   =================================================================== */
.cd__list h2{ margin: 0; font-size: 1rem; }
.cd__listHead{ display: flex; align-items: center; justify-content: space-between; gap: .75rem; margin-bottom: .75rem; }
.cd__order select{
  background: var(--content-panel);
  color: var(--content-text);
  border: 1px solid var(--content-border);
  padding: .45rem .6rem; border-radius: .5rem; outline: none;
}
.cd__tableWrap{ overflow: auto; border-radius: 10px; }
.cd__table{ width: 100%; border-collapse: collapse; font-size: .95rem; }
.cd__table th, .cd__table td{
  padding: .6rem .65rem;
  border-bottom: 1px solid var(--content-border);
  text-align: left;
  vertical-align: middle;
  font-variant-numeric: tabular-nums;
}
.cd__table thead th{ font-weight: 600; opacity: .9; background: var(--content-hover); }
.cd__table tr.is-sel{ background: var(--content-accent-bg); }

/* No cortar ID, RUT ni fecha */
.cd__table th:nth-child(1), .cd__table td:nth-child(1){ white-space: nowrap; width: 110px; }
.cd__table th:nth-child(3), .cd__table td:nth-child(3){ white-space: nowrap; }
.cd__table th:nth-child(4), .cd__table td:nth-child(4){ white-space: nowrap; }

/* Badges de estado */
.cd__badge{ display: inline-flex; align-items: center; padding: .44rem .9rem; font-size: 1rem; line-height: 1; border-radius: 999px; border: 1px solid var(--content-border); white-space: nowrap; }
.cd__badge.is-pending{ background: rgba(255,193,7,.12); }
.cd__badge.is-review{ background: var(--content-accent-bg-light); }
.cd__badge.is-ok{ background: rgba(16,185,129,.15); }
.cd__badge.is-bad{ background: rgba(239,68,68,.15); }
.cd__table th:nth-child(5), .cd__table td:nth-child(5){ width: 160px; }
.cd__table td:nth-child(5){ white-space: nowrap; }

/* ===================================================================
   DETALLE
   - Cambio clave: visor (imagen/pdf) más alto y ancho fluido
   =================================================================== */
.cd__detailHead{ display: flex; align-items: center; justify-content: space-between; margin-bottom: .75rem; }
.cd__detail h2{ margin: 0; font-size: 1rem; }
.cd__detailGrid{ display: grid; gap: .8rem; }
.cd__kv{ display: grid; grid-template-columns: 130px 1fr; gap: .5rem; align-items: center; }
.cd__k{ opacity: .8; font-size: .9rem; }
.cd__v{ font-size: .95rem; }

.cd__block .cd__k{ display: block; margin-bottom: .3rem; }
.cd__file{
  border: 1px solid var(--content-border);
  border-radius: .75rem;
  overflow: hidden;
  background: var(--content-bg);
  position: relative;
}
.cd__file img{
  display: block;
  width: 100%;
  height: auto;
  max-height: clamp(380px, 60vh, 620px);
  object-fit: contain;
}
.cd__file embed{
  width: 100%;
  height: clamp(380px, 60vh, 620px);
  display: block;
  border: 0;
}

.cd__actionsRow{ display: flex; flex-wrap: wrap; gap: .5rem; margin-top: .25rem; }
.cd__resp{ margin-top: .25rem; }
.cd__resp label{ display: block; margin: .5rem 0 .35rem; font-size: .9rem; opacity: .85; }
.cd__resp textarea{
  width: 100%; min-height: 110px; resize: vertical;
  padding: .65rem .75rem; border-radius: .6rem; border: 1px solid var(--content-border);
  background: var(--content-panel); color: var(--content-text); outline: none;
}

/* Botón de descarga sobre el visor */
.cd__dl{ position: absolute; top: 8px; right: 8px; display: inline-flex; align-items: center; justify-content: center; width: 34px; height: 34px; border-radius: 8px; background: rgba(0,0,0,.55); backdrop-filter: blur(2px); text-decoration: none; transition: background .2s ease; }
.cd__dl:hover{ background: rgba(0,0,0,.75); }
.cd__dl svg{ width: 18px; height: 18px; fill: #fff; }

/* ===================================================================
   INGRESO MANUAL
   =================================================================== */
.cd__manual h2{ margin: 0; font-size: 1rem; }
.cd__manualHead{ display: flex; align-items: center; justify-content: space-between; margin-bottom: .75rem; }
.cd__form{ display: grid; gap: 1rem; }
.cd__gridForm{ display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: .75rem; }
.cd__group{ display: flex; flex-direction: column; gap: .3rem; }
.cd__group--full{ grid-column: 1 / -1; }
.cd__group span{ font-size: .9rem; opacity: .8; }
.cd__group input, .cd__group select{
  background: var(--content-panel);
  border: 1px solid var(--content-border);
  border-radius: .5rem; padding: .55rem .7rem;
  color: var(--content-text); outline: none; font-size: .95rem;
}
.cd__group input:focus, .cd__group select:focus{ border-color: var(--content-accent); }
.cd__hint{ font-size: .8rem; opacity: .7; }

/* ===================================================================
   HISTORIAL
   =================================================================== */
.cd__history{ margin-top: 1rem; }
.cd__historyHead{ display: flex; align-items: center; justify-content: space-between; gap: .75rem; margin-bottom: .5rem; }
.cd__table--history{ border: 1px solid var(--content-border); border-radius: .6rem; overflow: hidden; }
.cd__table--history thead th{ background: var(--content-hover); font-size: .9rem; }
.cd__table--history tbody tr:hover{ background: var(--content-accent-bg); }

.cd__th--icons, .cd__td--icons{ text-align: center; width: 130px; }
.cd__iconBtn{
  background: var(--content-hover);
  border: 1px solid var(--content-border);
  border-radius: .6rem; padding: .4rem; cursor: pointer;
  transition: background .15s ease, transform .1s ease;
}
.cd__iconBtn:hover{ background: var(--content-accent-bg); transform: scale(1.08); }
.cd__icon{ width: 18px; height: 18px; display: block; fill: var(--content-text); opacity: .85; }
.cd__iconBtn:hover .cd__icon{ opacity: 1; }

/* ===================================================================
   RESPONSIVE
   =================================================================== */
@media (max-width: 1100px){
  .cd__gridMain.has-detail{ grid-template-columns: minmax(0, 1.45fr) minmax(0, 1fr); }
  .cd__file embed{ height: clamp(340px, 54vh, 560px); }
  .cd__file img{ max-height: clamp(340px, 54vh, 560px); }
}

/* (fix) había un typo: max-wh -> max-width */
@media (max-width: 900px){
  .cd__headerRow{ flex-direction: column; align-items: stretch; }
  .cd__actionsTop{ justify-content: flex-end; }
  .cd__gridMain.has-detail{ grid-template-columns: 1fr; }
  .cd__detailHead{ position: sticky; top: 0; background: var(--content-panel); padding-top: .25rem; z-index: 1; }
  .cd{ padding-left: .75rem; padding-right: .75rem; }
}

@media (max-width: 720px){
  .cd__listHead{ flex-direction: column; align-items: start; }
  .cd__kv{ grid-template-columns: 1fr; }
  .cd__gridForm{ grid-template-columns: 1fr; }
  .cd__file embed{ height: clamp(300px, 48vh, 480px); }
  .cd__file img{ max-height: clamp(300px, 48vh, 480px); }
}

/* ===================================================================
   PRINT: exportar SOLO el historial
   =================================================================== */
@media print{
  body{ background: #fff; }
  .adm__top, .adm__aside, .adm__backdrop, .cd__header, .cd__gridMain, .cd__manual { display: none !important; }
  .cd, .cd__card{ margin: 0; padding: 0; max-width: none; box-shadow: none; border: 0; }
  .cd__history{ display: block !important; }
}
/* ===========================
   MODAL DE CONFIRMACIÓN
   =========================== */
.cd__modalBack{
  position: fixed;
  inset: 0;
  background: rgba(16,24,40,.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999; /* por encima de todo */
}
.cd__modal{
  width: min(560px, 92vw);
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 20px 50px rgba(0,0,0,.25);
  overflow: hidden;
  color: #0b0e1d;
}
.cd__modalHead{
  padding: 16px 18px 8px;
  border-bottom: 1px solid #e7e9f3;
}
.cd__modalAttention{
  display: inline-block;
  font-weight: 800;
  font-size: 12px;
  letter-spacing: .6px;
  color: #b91c1c;           /* rojo atención */
  text-transform: uppercase;
  margin-bottom: 4px;
}
.cd__modalHead h3{
  margin: 0;
  font-size: 18px;
  font-weight: 800;
}
.cd__modalBody{
  padding: 14px 18px 4px;
  line-height: 1.5;
  color: #0b0e1d;
}
.cd__modalBody p{ margin: 0 0 8px; }
.cd__modalList{
  margin: 8px 0 12px 18px;
  padding: 0;
}
.cd__modalList li{
  margin: 6px 0;
}
.cd__checkRow{
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
  user-select: none;
}
.cd__modalActions{
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 14px 18px 16px;
  border-top: 1px solid #e7e9f3;
}

/* Botones: reutiliza estilos base, sólo refuerza en modal si hace falta */
.cd__btn--ok{
  background: #16a34a;
  color: #fff;
  border: 1px solid #12803c;
}
.cd__btn--ok:hover{ filter: brightness(0.95); }
